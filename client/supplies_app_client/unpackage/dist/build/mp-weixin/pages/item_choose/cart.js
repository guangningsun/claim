(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/item_choose/cart"],{"02b2":function(t,n,e){"use strict";(function(t){e("0152"),e("921b");o(e("66fd"));var n=o(e("a379"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"254f":function(t,n,e){"use strict";var o=e("39d8"),i=e.n(o);i.a},"39d8":function(t,n,e){},a379:function(t,n,e){"use strict";e.r(n);var o=e("bee3"),i=e("c407");for(var c in i)"default"!==c&&function(t){e.d(n,t,function(){return i[t]})}(c);e("254f");var a,s=e("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);n["default"]=u.exports},bee3:function(t,n,e){"use strict";var o,i=function(){var t=this,n=t.$createElement;t._self._c},c=[];e.d(n,"b",function(){return i}),e.d(n,"c",function(){return c}),e.d(n,"a",function(){return o})},c407:function(t,n,e){"use strict";e.r(n);var o=e("fe2c"),i=e.n(o);for(var c in o)"default"!==c&&function(t){e.d(n,t,function(){return o[t]})}(c);n["default"]=i.a},fe2c:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){return e.e("node-modules/@dcloudio/uni-ui/lib/uni-fab/uni-fab").then(e.bind(null,"4cdd"))},i=function(){return e.e("node-modules/@dcloudio/uni-ui/lib/uni-number-box/uni-number-box").then(e.bind(null,"ec1d"))},c={components:{uniNumberBox:i,uniFab:o},data:function(){return{domain:getApp().globalData.domain,default_img:'this.src="'+e("7988")+'"',cartList:[],directionStr:"垂直",horizontal:"right",vertical:"bottom",direction:"horizontal",pattern:{color:"#7A7E83",backgroundColor:"#fff",selectedColor:"#0b988f",buttonColor:"#0b988f"},content:[{iconPath:"/static/submit1.png",selectedIconPath:"/static/submit1.png",text:"提交选择",active:!0}]}},onLoad:function(){this.requestWithMethod(getApp().globalData.api_asset,"GET","",this.successCb,this.failCb,this.completeCb)},methods:{successCb:function(t){if(console.log("success cb"),0===t.data.error){var n=t.data.msg.asset_info,e=n.map(function(t,n,e){return Object.assign(t,{stock:n},{number:0})});e.map(function(t){t.stock=parseInt(t.asset_count)}),console.log(e),this.cartList=e}},failCb:function(t){console.log("api_asset failed",t)},completeCb:function(t){},numberChange:function(t,n,e){this.cartList[e].number=t},trigger:function(n){var e=this;console.log(n),0===n.index?t.showModal({title:"提示",content:"是否申领选择的物品？",success:function(t){t.confirm?e.submit():t.cancel&&console.log("用户点击取消")}}):1===n.index&&t.navigateTo({url:"../history/history"})},successCallback:function(n){console.log("success cb"),0===n.data.error&&(t.showToast({title:"提交成功!"}),t.navigateTo({url:"../index/index"}))},failCallback:function(t){console.log("api_claim_asset failed",t),this.showToast(t)},completeCallback:function(n){t.hideLoading()},submit:function(){t.showLoading({title:"正在提交"});var n=this.cartList.filter(function(t){return t.number>0});console.log(n);var e=t.getStorageSync("key_cat"),o=n.map(function(t){return Object.assign({claim_count:t.number},{claim_name:t.asset_name},{category:e})});console.log(o);var i={choose_list:o};this.requestWithMethod(getApp().globalData.api_claim_asset,"POST",i,this.successCallback,this.failCallback,this.completeCallback)}}};n.default=c}).call(this,e("543d")["default"])}},[["02b2","common/runtime","common/vendor"]]]);